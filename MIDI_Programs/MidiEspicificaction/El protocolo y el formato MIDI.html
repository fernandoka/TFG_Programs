<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=iso-8859-1">
  <title>El protocolo y el formato MIDI</title>
  <meta name="author" content="Alvaro Doménech Pujol">
  <link type="text/css"
  href="http://www.disca.upv.es/adomenec/IASPA/estilIASPA.css" rel="stylesheet">
  <link href="../estilIASPA.css" rel="stylesheet" type="text/css">
</head>

<body style="width: 800px;">
<p class="titol1">Síntesis del sonido</p>

<h1 class="sub">El protocolo y el formato MIDI</h1>

<div class="toc">
<ul>
  <li><a href="#Generalida">Generalidades</a> 
    <ul>
      <li><a href="#Midi">Midi y computador</a></li>
    </ul>
  </li>
  <li><a href="#Mensajes">Mensajes y canales</a> 
    <ul>
      <li><a href="#canales">Los canales</a></li>
    </ul>
  </li>
  <li><a href="#Instrument">Instrumentos MIDI</a></li>
  <li><a href="#Controlado">Controladores MIDI</a></li>
  <li><a href="#Mensajes1">Mensajes</a></li>
  <li><a href="#archivos">Los archivos MIDI</a></li>
</ul>
</div>

<h2 id="Generalida">Generalidades</h2>

<p>El protocolo estándar de comunicaciones MIDI (<span
style="font-style: italic;">Musical Instrument Digital Interface</span>) se
concibió en 1983 para comunicar sintetizadores musicales. La especificación fue
creada como convenio entre fabricantes, que constituyeron la <a
href="http://www.midi.org/">MMA</a> (Midi Manufacturers Association). Mantienen
actualizada la especificación y la publican (es bastante cara). En la página de
<a href="http://www.borg.com/%7Ejglatt/tech/midispec.htm">jglatt</a> puedes
encontrar los detalles.</p>

<p>La especificación consta de un nivel físico en el que describe conectores y
cables. Mira en la Wikipedia <a
href="http://en.wikipedia.org/wiki/Image:Midi_ports_and_cable.jpg">esta
foto</a> donde aparecen los conectores de tipo DIN y cables. </p>

<p>Inicialmente comunicaba dos categorías de dispositivos separados
físicamente: controladores y módulos de sonido. La conexión MIDI entre ellos es
unidireccional: el emisor o controlador era, normalmente, un teclado semejante
al de un piano, que era accionado por el músico; el receptor o módulo de
sonido era un aparato electrónico capaz de generar sonidos de la altura musical
correspondiente a la nota. La comunicación se establece mediante mensajes.</p>

<p style="margin-left: 40px;" class="dibu"><a
href="dibus/controlador-modul.png"><img
style="border: 0px solid ; width: 500px; height: 92px;" alt=""
src="dibus/controlador-modul.png"></a></p>

<p>Una vez establecido el estándar, se popularizó rápidamente. El protocolo
pasó a utilizarse en otros campos, como el control automatizado de iluminación
teatral o en la activación sincronizada de efectos especiales en la producción
cinematográfica. En cuanto a la música, la estandarización creó un gran mercado
de instrumentos musicales digitales con los que se creó el estilo musical
Tecno-pop. Mira en la página de <a
href="http://www.doepfer.de/home_e.htm">Doepfer</a> una muestra de dispositivos
y componentes. </p>

<p>Los principales dispositivos son los siguientes: </p>
<ul>
  <li><p><span style="font-weight: bold;">Controladores</span>. Son las fuentes
    primarias de mensajes Midi y por eso llevan una entrada MIDI-OUT. Los más
    frecuentes son teclados, pero existen símiles electromecánicos de diversos
    tipos de instrumentos: flautas, saxofones, guitarras y otros. Los
    controladores no producen ningún sonido.</p>
  </li>
  <li><p><span style="font-weight: bold;">Módulos de sonido</span> de diversos
    tipos. Son los receptores de mensajes y por eso tienen una entrada MIDI-IN.
    Son los consumidores primarios de mensajes Midi, y los traducen en señal de
    audio. La conversión depende del diseño del módulo y de los parámetros que
    se le hayan fijado. Estos es: en general, cada módulo tendrá sus sonidos,
    que se podrán modificar en mayor o menor medida mediante algunos
    parámetros.<br>
    Los módulos suelen llevar una salida MIDI-THRU que reproduce los mensajes
    midi recibidos por la entrada para poder conectar otros módulos en
    cascada.</p>
  </li>
  <li><p><span style="font-weight: bold;">Sintetizadores</span> completos, que
    combinaban un controlador de tipo teclado con un módulo de sonido. Pueden
    funcionar de forma autónoma conectando el controlador con el módulo
    interno; pero también admiten conexiones de entrada y de salida con otros
    dispositivos MIDI. Como son productores y receptores de mensajes, sus
    conexiones son tres: <a
    href="http://en.wikipedia.org/wiki/Image:Midi_ports_and_cable.jpg">MIDI-IN,
    MIDI-OUT y MIDI-THRU</a>.</p>
  </li>
  <li><p><span style="font-weight: bold;">Cajas de ritmos</span>, que combinan
    un módulo de sonido (especializado en instrumentos de percusión) con una
    fuente de mensajes programable. Sus usuarios lo usan para programar
    esquemas rítmicos propios de una batería. Suelen disponer de las tres
    conexiones Midi. </p>
  </li>
  <li><p><span style="font-weight: bold;">Secuenciadores</span>: dispositivos
    que almacenan la información Midi de manera que pueden repetirla después de
    manera controlada. Un secuenciador permite el tratamiento de la información
    Midi almacenada. También suelen disponer de las tres conexiones Midi. </p>
  </li>
  <li><p>Dispositivos de encaminamiento de mensajes: concentradores,
    bifurcadores y otros, que permiten combinaciones flexibles de diversos
    componentes.</p>
  </li>
</ul>

<p>Con estos dispositivos, se pueden crear complicadas topologías. Las
instalaciones Midi han dado soporte a la música electrónica durante 30 años.
Una instalación como la de la figura muestra una posible configuración. En rojo
aparece el flujo de los mensajes Midi, en negro el audio.</p>

<p style="margin-left: 40px;"><a href="dibus/muntatge-midi.png"><img
style="border: 0px solid ; width: 691px; height: 291px;" alt=""
src="dibus/muntatge-midi.png"></a></p>

<h3 id="Midi">Midi y computador</h3>

<p>Con la entrada del computador en el mundo de la música electrónica, la mayor
parte de los dispositivos están en fase de desaparición. Primero desaparecieron
los secuenciadores, porque un computador de mediados los años 80, con el
adaptador MIDI apropiado, podía ejecutar programas como <span
style="font-style: italic;">Notator</span>, <span
style="font-style: italic;">Cubase</span> y otros que realizaban las mismas
funciones que un secuenciador hardware y otras muchas más. </p>

<p>Muchas de las DAW actuales (2011) son la evolución tecnológica de los
secuenciadores Midi de hace 20 años. Conforme la capacidad de almacenamiento y
la velocidad de cálculo han ido creciendo, otros componentes Midi se han
"virtualizado", es decir, se han emulado por programa. Por ese motivo los
módulos de sonido y las cajas de ritmos están desapareciendo de las tiendas
sustituidos por programas cada vez más baratos. De los antiguos dispositivos,
sólolos controladores han sobrevivido en el mercado. </p>

<p>También ha evolucionado la adaptación del Midi al computador. Al principio,
se instalaban en el bus de tarjetas o se conectaban al puerto serie estándar
(<a href="http://en.wikipedia.org/wiki/MPU-401">Wikipedia: Roland MPU-401</a>).
Posteriormente, las tarjetas de sonido corrientes incorporaron una conexión
Midi a través de un <a href="fotos/ExternalConnectors2-small.jpg">conector para
juegos</a> incorporado. El <a href="fotos/EdirolUM-2EX.jpg">puerto USB</a>
cambió el aspecto del adaptador. En la actualidad, los dispositivos Midi
(diversos controladores y módulos) disponen de puertos USB alternativos a la
conexión del estándar.</p>
El estándar Midi incorporó el SMF (Standard MIDI Files, puedes encontrarlo en
la página de <a
href="http://www.borg.com/%7Ejglatt/tech/midifile.htm">jglatt</a>)) que
describe el formato de los archivos de computador donde se almacena información
Midi. <br>


<p>Finalmente, se han creado diversos estándares de sintetizador software, que
permiten la inserción de instrumentos virtuales dentro de las DAW en forma de
<span style="font-style: italic;">plug-in</span>.</p>

<center>

<table style="width: 478px;" cellpadding="2" cellspacing="2">
  <tbody>
    <tr bgcolor="#c0c0c0">
      <td
        style="font-weight: bold; text-align: center; width: 150px;"><p><b>Fabricante</b></p>
      </td>
      <td style="text-align: center; width: 152px;"><p><b>Estándar</b></p>
      </td>
      <td style="text-align: center; width: 149px;"><p><b>Plataforma</b></p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="text-align: center; width: 150px;"><p>Steinberg</p>
      </td>
      <td
        style="font-style: italic; text-align: center; width: 152px;"><p>VSTi</p>
      </td>
      <td style="text-align: center; width: 149px;"><p>Windows, Linux, Mac</p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="text-align: center; width: 150px;"><p>Digidesign</p>
      </td>
      <td style="font-style: italic; text-align: center; width: 152px;"><p>RTAS
        instrument</p>
      </td>
      <td style="text-align: center; width: 149px;"><p>Windows, Mac</p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="text-align: center; width: 150px;"><p>Microsoft</p>
      </td>
      <td
        style="font-style: italic; text-align: center; width: 152px;"><p>DXI</p>
      </td>
      <td style="text-align: center; width: 149px;"><p>Windows</p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="text-align: center; width: 150px;"><p>Apple</p>
      </td>
      <td
        style="font-style: italic; text-align: center; width: 152px;"><p>Audio
        Unit instrument</p>
      </td>
      <td style="text-align: center; width: 149px;"><p>Mac</p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="text-align: center; width: 150px;"><p>(libre)</p>
      </td>
      <td
        style="font-style: italic; text-align: center; width: 152px;"><p>DSSI</p>
      </td>
      <td style="text-align: center; width: 149px;"><p>Linux</p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="text-align: center; width: 150px;"><p>(libre)</p>
      </td>
      <td
        style="font-style: italic; text-align: center; width: 152px;"><p>Nyquist</p>
      </td>
      <td style="text-align: center; width: 149px;"><p>Linux</p>
      </td>
    </tr>
  </tbody>
</table>
</center>

<p>Para integrar el encaminamiento de mensajes internamente, los computadores
ofrecen diversas estrategias. En los entornos Windows, <a
href="http://www.midiox.com/myoke.htm">Midi Yoke</a> permite la interconexión
libre entre equipos externos conectados a los puertos MIDI físicos y los
secuenciadores y sintetizadores virtuales disponibles. En Mac OS X, el sistema
operativo integra esa funcionalidad.</p>

<h2 id="Mensajes">Mensajes y canales</h2>
El protocolo Midi rige un sistema de comunicaciones serie cuya unidad es el
mensaje. Un mensaje está formado por uno o más bytes y cada byte va acompañado
de un bit de paridad para detección de errores. Cada mensaje está producido por
una acción del intérprete sobre el controlador (pulsar una tecla, soltarla,
etc.). El controlador asocia los mensajes a un canal y es recibido por un
módulo de sonido, afectando al sonido producido, o por un secuenciador que lo
almacena. Emisor y receptor están configurados para comunicarse a través del
mismo canal preestablecido. 

<h3 id="canales">Los canales</h3>

<p>Un sistema Midi básico permite mantener 16 canales independientes. Así, a
través del mismo conector, pueden transmitirse de forma separada el producto de
16 intérpretes, cada uno de ellos actuando sobre un controlador; cada
interpretación será procesada por el receptor asociado al canal apropiado. </p>

<p>Esta organización es útil para la producción musical corriente.
Veamos diversas situaciones:</p>
<ul>
  <li><p>En el caso más sencillo, un intérprete actúa sobre un controlador que
    emite mensajes por un único canal. En el otro extremo, un módulo de sonido
    recibe los mensajes por el mismo canal y genera los sonidos apropiados (un
    piano, por ejemplo)</p>
  </li>
  <li><p>Un intérprete actúa sobre un controlador que emite sobre el canal
    <span style="font-style: italic;">A </span>mientras una caja de ritmos
    envía un patrón rítmico de mensajes sobre el canal <span
    style="font-style: italic;">B </span>según un programa dado. Un módulo de
    sonido recibe los mensajes del canal <span style="font-style: italic;">A
    </span>para generar sonidos de piano y otro módulo recibe los mensajes del
    canal <span style="font-style: italic;">B </span>y genera sonidos de
    percusión.</p>
  </li>
  <li><p>En una fase previa, el intérprete registra una interpretación  en un
    secuenciador a través del canal <span style="font-style: italic;">A</span>.
    Posteriomente, envía desde el controlador una segunda interpretación a
    través del canal <span style="font-style: italic;">B </span>mientras el
    secuenciador reproduce lo grabado. Los módulos de sonidos generan sonidos
    de piano a partir del canal <span style="font-style: italic;">A </span>y de
    órgano litúrgico a partir del canal <span
    style="font-style: italic;">B.</span></p>
  </li>
  <li><p>Por etapas, un único intérprete registra 16 interpretaciones y las
    almacena de forma separada en los 16 canales de un secuenciador. Cada canal
    representa un instrumento concreto: guitarra, batería bajo, piano, saxofón,
    etc. El proceso permite la modificación y corrección de cada interpretación
    a gusto del intérprete. Finalmente, asocia cada canal a un módulo de sonido
    para escuchar el resultado. </p>
  </li>
</ul>

<p>El sistema Midi es la herramienta básica de los compositores de música
popular desde los años 80. Permiten a un único músico producir algo parecido a
un conjunto. Buena parte de la música pop se realiza mediante sistemas Midi.</p>

<h2 id="Instrument">Instrumentos MIDI</h2>

<p>Con el nombre de instrumento Midi, abstraeremos cualquier generador de
sonido físico o virtual. Los instrumento MIDI pueden ser de diversos tipos.</p>
<ul>
  <li><p><span style="font-weight: bold;">Monofónico</span> o <span
    style="font-weight: bold;">polifónico</span>. Un instrumento monofónico
    sólo puede producir un sonido a la vez. Si el intérprete pulsa dos teclas
    simultáneamente, o si pulsa una tecla antes de liberar otra, el instrumento
    seleccionará uno de los sonidos correspondientes. Un instrumento que simula
    un saxofón, por ejemplo, puede ser monofónico por similitud con el
    instrumento real. Muchos de los sintetizadores clásicos eran monofónicos.
    Los instrumentos polifónicos, en cambio, pueden hacer sonar un número
    limitado de notas. Un instrumento que simule un piano, por ejemplo, deberá
    tener una polifonía de 32 o más notas si quiere aproximarse a un piano
    real. </p>
  </li>
  <li><p><span style="font-weight: bold;">Monotímbrico</span> o <span
    style="font-weight: bold;">politímbrico</span>. Esta distinción se aplica a
    los instrumentos que ofrecen diversos timbres seleccionables. Estos
    instrumentos se denominan módulos y los actuales suelen disponer de un
    surtido de cientos de timbres: pianos, instrumentos de viento, de cuerda,
    de percusión, órganos y muchos otros. Un módulo es monotímbrico si sólo
    permite seleccionar un timbre dado y politímbrico cuando permite la
    selección concurrente de varios timbres. Un módulo politímbrico equivale a
    un conjunto de instrumentos. <br>
    Considera un instrumento politímbrico capaz de recibir mensajes por los 16
    canales MIDI y que contiene un banco de 128 timbres distintos. La
    configuración del módulo consistirá en asignar a cada canal de entrada un
    timbre.  <br>
    Los instrumentos politímbricos de propósito general se adhieren al
    subestándar <a href="http://www.borg.com/%7Ejglatt/tutr/gm.htm#Patch">GM
    (General Midi)</a> que codifica los nombres y los identificadores numéricos
    de 128 timbres.  </p>
  </li>
</ul>
<ul>
  <li><p><span style="font-weight: bold;">Mapeados o no mapeados</span>. En los
    instrumentos mapeados cada nota tiene asociada timbre. Los sonidos de los
    instrumentos mapeados no dan sensación de altura musical, y no tiene
    sentido construir melodías con ellos. Los casos más frecuentes de
    instrumento mapeado son las percusiones y los efectos especiales. Para las
    percusiones, el subestándar <a
    href="http://www.borg.com/%7Ejglatt/tutr/gm.htm#Keys">GM</a> especifica
    nombres del instrumento y las teclas del controlador a que van asociados.
    Los no mapeados son los demás instrumentos: todas las notas de un
    instrumento Midi con sonido de piano corresponden al mismo timbre (el del
    piano) y a las posibles alturas musicales.</p>
  </li>
</ul>

<h2 id="Controlado">Controladores MIDI</h2>

<p>El controlador tipo del protocolo Midi dispone de una serie de mandos. Se
encarga de generar los mensajes Midi a partir de la manipulación de teclas y
otros mandos. El efecto que cada mensaje produce en el sonido depende del
módulo sintetizador. </p>

<p style="margin-left: 40px;"><img style="width: 600px; height: 285px;" alt=""
src="fotos/E-mu.jpg"></p>
<ul>
  <li><p>Tecla. Cada tecla tiene su recorrido entre el punto de reposo y un
    tope. El controlador genera un mensaje <span
    style="font-style: italic;">Note on</span> cuando se pulsa la tecla y un
    mensaje <span style="font-style: italic;">Note off</span> cuando se libera.
    Si el teclado es sensible a la velocidad (actualmente casi todos lo son),
    la electrónica del controlador mide el tiempo transcurrido durante el
    recorrido de la tecla desde que abandona el punto de reposo hasta el tope
    final y al revés. Ese tiempo da una medida indirecta de la intensidad con
    la que el teclista golpea o libera la tecla y se codifica en 7 bits, dentro
    del rango de 0 a 127, como parámetro de velocidad. Además, algunos teclados
    son sensibles a la presión (<em>aftertouch</em> o <em>pressure</em>) que se
    ejerce sobre una tecla una vez está pulsada. La presión se codifica en 7
    bits. </p>
  </li>
  <li><p>Mandos de controlador. Puede haber hasta 128 distintos, identificador
    por un número de 7 bits. Cada mando puede tener el aspecto que el
    fabricante decida: un botón giratorio, una rueda, un mando deslizante,
    etc. Un mando genera un mensaje que indica su posición con 7 bits de
    precisión cada vez que cambia.    </p>
  </li>
  <li><p>Ruedas de <span style="font-style: italic;">Pitch Bend</span> y de
    modulación. Ambas tienen un recorrido de aproximadamente 1/6 de vuelta,
    suelen aparecer juntas a la izquierda de las teclas del controlador y
    generan mensajes cuando giran. El ángulo de giro se codifica con 7 bits
    (entre 0 y 127), aunque la especificación Midi y los controladores más
    caros permiten especificar el grado de <span
    style="font-style: italic;">Pitch Bend</span> con 14 bits. La rueda de
    <span style="font-style: italic;">Pitch Bend</span> tiene una posición de
    reposo a mitad de recorrido, asociada al valor 64, a donde vuelve cuando
    queda libre. La rueda de modulación no tiene muelle que la retorne a un
    punto de reposo.</p>
  </li>
</ul>

<p style="margin-left: 40px;"><img style="width: 250px; height: 206px;" alt=""
src="fotos/wheelbox.gif"></p>

<p></p>

<h2 id="Mensajes1">Mensajes</h2>

<p>Los mensajes midi están estructurados en octetos. Cuando se transmiten, a
cada octeto se le añade un bit de paridad para detección de errores. </p>

<p>El primer octeto de un mensaje contiene un comando codificado en cuatro bits
de la forma<span style="font-weight: bold;"></span><span
style="font-family: monospace; font-weight: bold;">1MMM</span>. (en
hexadecimal, <span style="font-style: italic;">0x8</span> a <span
style="font-style: italic;">0xF</span>) y un identificador de canal de forma
<span style="font-family: monospace; font-weight: bold;">CCCC</span> (por eso
hay 16 canales, que generalmente se numeran del 1 al 16). </p>

<div style="margin-left: 40px;">
<a href="dibus/missatgeMidi-G.png"><img
style="border: 0px solid ; width: 352px; height: 75px;" alt=""
src="dibus/missatgeMidi-X.png"></a></div>

<p>Los comandos admitidos en esta codificación son:</p>

<center>

<table cellpadding="4" cellspacing="1">
  <tbody>
    <tr bgcolor="#c0c0c0">
      <td><p><b> Mensaje</b></p>
      </td>
      <td><p><b>Cód.</b></p>
      </td>
      <td><p><b>Parámetro 1</b></p>
      </td>
      <td><p><b>Parámetro 2</b></p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="font-style: italic;"><p>Note Off</p>
      </td>
      <td><p>0x8</p>
      </td>
      <td><p>número de nota</p>
      </td>
      <td><p>velocidad</p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="font-style: italic;"><p>Note On</p>
      </td>
      <td><p>0x9</p>
      </td>
      <td><p>número de nota</p>
      </td>
      <td><p>velocidad</p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="font-style: italic;"><p>Note Aftertouch</p>
      </td>
      <td><p>0xA</p>
      </td>
      <td><p>número de nota</p>
      </td>
      <td><p>presión</p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="font-style: italic;"><p>Controller</p>
      </td>
      <td><p>0xB</p>
      </td>
      <td><p>núm. de controlador</p>
      </td>
      <td><p>controller value</p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="font-style: italic;"><p>Program Change</p>
      </td>
      <td><p>0xC</p>
      </td>
      <td><p>núm. de programa</p>
      </td>
      <td><p>&mdash;</p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="font-style: italic;"><p>Channel Pressure</p>
      </td>
      <td><p>0xD</p>
      </td>
      <td><p>presión</p>
      </td>
      <td><p>&mdash;</p>
      </td>
    </tr>
    <tr bgcolor="#f0f0f0">
      <td style="font-style: italic;"><p>Pitch Bend</p>
      </td>
      <td><p>0xE</p>
      </td>
      <td style="font-style: italic;"><p>pitch value (LSB)</p>
      </td>
      <td style="font-style: italic;"><p>pitch value (MSB)</p>
      </td>
    </tr>
  </tbody>
</table>
</center>
<br>


<p>Cada comando va compañado de sus parámetros característicos. Los parámetros
se alojan en octetos cuyo bit más significativo es siempre 0. Los siete bits
restante codifican un valor comprendido entre 0 y 127. </p>

<p>Los comandos <span style="font-style: italic;">Note On </span>y <span
style="font-style: italic;">Note Off</span>, por ejemplo, codifican la tecla en
un rango suficiente para representar las 88 notas del piano y otras que no
existen en los instrumentos analógicos tradicionales. </p>

<div style="margin-left: 40px;">
<a href="dibus/TeclatControlador.png"><img
style="border: 0px solid ; width: 525px; height: 270px;" alt=""
src="dibus/TeclatControlador.png"></a><br>
</div>
<br>


<div style="margin-left: 40px;">
   <a href="dibus/NoteNumbers.png"><img
style="border: 0px solid ; width: 508px; height: 238px;" alt=""
src="dibus/NoteNumbers.png"></a><br>
</div>

<p>La relación entre la frecuencia <em>f</em> del sonido y el código <em>t</em>
de tecla es f = 8.1757989156 · 2 <strong><sup><em>t</em>/12</sup></strong>.</p>

<p>Los controladores con sensibilidad en el teclado codifican la velocidad de
pulsación y de liberación de cada nota en el rango de 0 a 127. Los módulos de
sonido pueden interpretar la velocidad como potencia del sonido generado, pero
también como la duración de ataque de la envolvente o cualquier otro parámetro
propio del instrumento.<br>
</p>

<h2>Entrada/salida de mensajes MIDI</h2>

<p></p>

<h2 id="archivos">Los archivos MIDI</h2>

<p>El formato estándar de almacenamiento de los eventos MIDI es el archivo Midi
(la terminación convencional es ".mid"). Un archivo de este tipo es
conceptualmente equivalente a una partitura. </p>

<p>Para almacenar la información temporal que describe las acciones que el
intérprete efectúa sobre el controlador se define una base de tiempos
equivalente a un compás: un número de tiempos por compás y la duración de cada
tiempo en unidades de figura de la notación musical (como <img
style="width: 28px; height: 18px;" alt="" src="dibus/compas.png"
align="middle">, que denota un compás de cuatro tiempos, donde cada tiempo
equivale a una negra). La velocidad de reproducción se corresponde con el
concepto de tempo, que en en notación musical suele expresarse en unidades de
metrónomo o tiempos de compás por minuto (por ejemplo, <img
style="width: 36px; height: 15px;" alt="" src="dibus/tempo.png"> indica que ).
En los archivos Midi el tempo se expresa en unidades de microsegundo por tiempo
de compás (por ejemplo, la duración de una negra es de 10000 µs). </p>
Eventos como <span style="font-style: italic;">Note On</span> y <span
style="font-style: italic;">Note Off </span>se almacenan de forma parecida a
cómo lo anotaría un músico en la partitura: se sitúa una nota de cierta
duración ubicada en una parte de un compás. También se almacena las velocidades
de los dos eventos. </body>
</html>
